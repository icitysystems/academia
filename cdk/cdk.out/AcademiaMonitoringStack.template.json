{
 "Description": "Academia Production Monitoring (CloudWatch, Alarms, VPC Flow Logs)",
 "Resources": {
  "AlarmTopicD01E77F9": {
   "Type": "AWS::SNS::Topic",
   "Properties": {
    "DisplayName": "Academia Production Alarms",
    "Tags": [
     {
      "Key": "Environment",
      "Value": "Production"
     },
     {
      "Key": "ManagedBy",
      "Value": "CDK"
     },
     {
      "Key": "Project",
      "Value": "Academia"
     }
    ],
    "TopicName": "academia-alarms"
   },
   "Metadata": {
    "aws:cdk:path": "AcademiaMonitoringStack/AlarmTopic/Resource"
   }
  },
  "VpcFlowLogsGroupC5F6A8C5": {
   "Type": "AWS::Logs::LogGroup",
   "Properties": {
    "LogGroupName": "/aws/vpc/academia-flow-logs",
    "RetentionInDays": 30,
    "Tags": [
     {
      "Key": "Environment",
      "Value": "Production"
     },
     {
      "Key": "ManagedBy",
      "Value": "CDK"
     },
     {
      "Key": "Project",
      "Value": "Academia"
     }
    ]
   },
   "UpdateReplacePolicy": "Delete",
   "DeletionPolicy": "Delete",
   "Metadata": {
    "aws:cdk:path": "AcademiaMonitoringStack/VpcFlowLogsGroup/Resource"
   }
  },
  "VpcFlowLogsRole6B344965": {
   "Type": "AWS::IAM::Role",
   "Properties": {
    "AssumeRolePolicyDocument": {
     "Statement": [
      {
       "Action": "sts:AssumeRole",
       "Effect": "Allow",
       "Principal": {
        "Service": "vpc-flow-logs.amazonaws.com"
       }
      }
     ],
     "Version": "2012-10-17"
    },
    "Tags": [
     {
      "Key": "Environment",
      "Value": "Production"
     },
     {
      "Key": "ManagedBy",
      "Value": "CDK"
     },
     {
      "Key": "Project",
      "Value": "Academia"
     }
    ]
   },
   "Metadata": {
    "aws:cdk:path": "AcademiaMonitoringStack/VpcFlowLogsRole/Resource"
   }
  },
  "VpcFlowLogsRoleDefaultPolicy9C8CF3FB": {
   "Type": "AWS::IAM::Policy",
   "Properties": {
    "PolicyDocument": {
     "Statement": [
      {
       "Action": [
        "logs:CreateLogStream",
        "logs:PutLogEvents"
       ],
       "Effect": "Allow",
       "Resource": {
        "Fn::GetAtt": [
         "VpcFlowLogsGroupC5F6A8C5",
         "Arn"
        ]
       }
      }
     ],
     "Version": "2012-10-17"
    },
    "PolicyName": "VpcFlowLogsRoleDefaultPolicy9C8CF3FB",
    "Roles": [
     {
      "Ref": "VpcFlowLogsRole6B344965"
     }
    ]
   },
   "Metadata": {
    "aws:cdk:path": "AcademiaMonitoringStack/VpcFlowLogsRole/DefaultPolicy/Resource"
   }
  },
  "VpcFlowLog": {
   "Type": "AWS::EC2::FlowLog",
   "Properties": {
    "DeliverLogsPermissionArn": {
     "Fn::GetAtt": [
      "VpcFlowLogsRole6B344965",
      "Arn"
     ]
    },
    "LogFormat": "${version} ${account-id} ${interface-id} ${srcaddr} ${dstaddr} ${srcport} ${dstport} ${protocol} ${packets} ${bytes} ${start} ${end} ${action} ${log-status}",
    "LogGroupName": {
     "Ref": "VpcFlowLogsGroupC5F6A8C5"
    },
    "MaxAggregationInterval": 60,
    "ResourceId": {
     "Fn::ImportValue": "AcademiaBackendStack:ExportsOutputRefAcademiaVpc136B99B28EC642DB"
    },
    "ResourceType": "VPC",
    "Tags": [
     {
      "Key": "Environment",
      "Value": "Production"
     },
     {
      "Key": "ManagedBy",
      "Value": "CDK"
     },
     {
      "Key": "Project",
      "Value": "Academia"
     }
    ],
    "TrafficType": "ALL"
   },
   "Metadata": {
    "aws:cdk:path": "AcademiaMonitoringStack/VpcFlowLog"
   }
  },
  "LambdaErrorsAlarm8ED74A7D": {
   "Type": "AWS::CloudWatch::Alarm",
   "Properties": {
    "AlarmActions": [
     {
      "Ref": "AlarmTopicD01E77F9"
     }
    ],
    "AlarmDescription": "Lambda function errors exceeded threshold",
    "AlarmName": "Academia-Lambda-Errors",
    "ComparisonOperator": "GreaterThanOrEqualToThreshold",
    "Dimensions": [
     {
      "Name": "FunctionName",
      "Value": {
       "Fn::ImportValue": "AcademiaBackendStack:ExportsOutputRefBackendFunction63314140F8746164"
      }
     }
    ],
    "EvaluationPeriods": 2,
    "MetricName": "Errors",
    "Namespace": "AWS/Lambda",
    "OKActions": [
     {
      "Ref": "AlarmTopicD01E77F9"
     }
    ],
    "Period": 300,
    "Statistic": "Sum",
    "Tags": [
     {
      "Key": "Environment",
      "Value": "Production"
     },
     {
      "Key": "ManagedBy",
      "Value": "CDK"
     },
     {
      "Key": "Project",
      "Value": "Academia"
     }
    ],
    "Threshold": 10,
    "TreatMissingData": "notBreaching"
   },
   "Metadata": {
    "aws:cdk:path": "AcademiaMonitoringStack/LambdaErrorsAlarm/Resource"
   }
  },
  "LambdaDurationAlarmA8007F1F": {
   "Type": "AWS::CloudWatch::Alarm",
   "Properties": {
    "AlarmActions": [
     {
      "Ref": "AlarmTopicD01E77F9"
     }
    ],
    "AlarmDescription": "Lambda function duration exceeded 10 seconds (P95)",
    "AlarmName": "Academia-Lambda-Duration",
    "ComparisonOperator": "GreaterThanOrEqualToThreshold",
    "Dimensions": [
     {
      "Name": "FunctionName",
      "Value": {
       "Fn::ImportValue": "AcademiaBackendStack:ExportsOutputRefBackendFunction63314140F8746164"
      }
     }
    ],
    "EvaluationPeriods": 3,
    "ExtendedStatistic": "p95",
    "MetricName": "Duration",
    "Namespace": "AWS/Lambda",
    "Period": 300,
    "Tags": [
     {
      "Key": "Environment",
      "Value": "Production"
     },
     {
      "Key": "ManagedBy",
      "Value": "CDK"
     },
     {
      "Key": "Project",
      "Value": "Academia"
     }
    ],
    "Threshold": 10000,
    "TreatMissingData": "notBreaching"
   },
   "Metadata": {
    "aws:cdk:path": "AcademiaMonitoringStack/LambdaDurationAlarm/Resource"
   }
  },
  "LambdaThrottlesAlarm13DE03A1": {
   "Type": "AWS::CloudWatch::Alarm",
   "Properties": {
    "AlarmActions": [
     {
      "Ref": "AlarmTopicD01E77F9"
     }
    ],
    "AlarmDescription": "Lambda function is being throttled",
    "AlarmName": "Academia-Lambda-Throttles",
    "ComparisonOperator": "GreaterThanOrEqualToThreshold",
    "Dimensions": [
     {
      "Name": "FunctionName",
      "Value": {
       "Fn::ImportValue": "AcademiaBackendStack:ExportsOutputRefBackendFunction63314140F8746164"
      }
     }
    ],
    "EvaluationPeriods": 2,
    "MetricName": "Throttles",
    "Namespace": "AWS/Lambda",
    "Period": 300,
    "Statistic": "Sum",
    "Tags": [
     {
      "Key": "Environment",
      "Value": "Production"
     },
     {
      "Key": "ManagedBy",
      "Value": "CDK"
     },
     {
      "Key": "Project",
      "Value": "Academia"
     }
    ],
    "Threshold": 5,
    "TreatMissingData": "notBreaching"
   },
   "Metadata": {
    "aws:cdk:path": "AcademiaMonitoringStack/LambdaThrottlesAlarm/Resource"
   }
  },
  "LambdaConcurrencyAlarm801E48EA": {
   "Type": "AWS::CloudWatch::Alarm",
   "Properties": {
    "AlarmActions": [
     {
      "Ref": "AlarmTopicD01E77F9"
     }
    ],
    "AlarmDescription": "Lambda concurrent executions approaching limit",
    "AlarmName": "Academia-Lambda-Concurrency",
    "ComparisonOperator": "GreaterThanOrEqualToThreshold",
    "Dimensions": [
     {
      "Name": "FunctionName",
      "Value": {
       "Fn::ImportValue": "AcademiaBackendStack:ExportsOutputRefBackendFunction63314140F8746164"
      }
     }
    ],
    "EvaluationPeriods": 3,
    "MetricName": "ConcurrentExecutions",
    "Namespace": "AWS/Lambda",
    "Period": 60,
    "Statistic": "Maximum",
    "Tags": [
     {
      "Key": "Environment",
      "Value": "Production"
     },
     {
      "Key": "ManagedBy",
      "Value": "CDK"
     },
     {
      "Key": "Project",
      "Value": "Academia"
     }
    ],
    "Threshold": 800,
    "TreatMissingData": "notBreaching"
   },
   "Metadata": {
    "aws:cdk:path": "AcademiaMonitoringStack/LambdaConcurrencyAlarm/Resource"
   }
  },
  "RdsCpuAlarm29EF1690": {
   "Type": "AWS::CloudWatch::Alarm",
   "Properties": {
    "AlarmActions": [
     {
      "Ref": "AlarmTopicD01E77F9"
     }
    ],
    "AlarmDescription": "RDS CPU utilization exceeded 80%",
    "AlarmName": "Academia-RDS-CPU",
    "ComparisonOperator": "GreaterThanOrEqualToThreshold",
    "Dimensions": [
     {
      "Name": "DBInstanceIdentifier",
      "Value": {
       "Fn::ImportValue": "AcademiaBackendStack:ExportsOutputRefAcademiaDatabase583B400399DBD937"
      }
     }
    ],
    "EvaluationPeriods": 3,
    "MetricName": "CPUUtilization",
    "Namespace": "AWS/RDS",
    "OKActions": [
     {
      "Ref": "AlarmTopicD01E77F9"
     }
    ],
    "Period": 300,
    "Statistic": "Average",
    "Tags": [
     {
      "Key": "Environment",
      "Value": "Production"
     },
     {
      "Key": "ManagedBy",
      "Value": "CDK"
     },
     {
      "Key": "Project",
      "Value": "Academia"
     }
    ],
    "Threshold": 80,
    "TreatMissingData": "notBreaching"
   },
   "Metadata": {
    "aws:cdk:path": "AcademiaMonitoringStack/RdsCpuAlarm/Resource"
   }
  },
  "RdsStorageAlarm879B47F1": {
   "Type": "AWS::CloudWatch::Alarm",
   "Properties": {
    "AlarmActions": [
     {
      "Ref": "AlarmTopicD01E77F9"
     }
    ],
    "AlarmDescription": "RDS free storage space below 5GB",
    "AlarmName": "Academia-RDS-FreeStorage",
    "ComparisonOperator": "LessThanThreshold",
    "Dimensions": [
     {
      "Name": "DBInstanceIdentifier",
      "Value": {
       "Fn::ImportValue": "AcademiaBackendStack:ExportsOutputRefAcademiaDatabase583B400399DBD937"
      }
     }
    ],
    "EvaluationPeriods": 2,
    "MetricName": "FreeStorageSpace",
    "Namespace": "AWS/RDS",
    "OKActions": [
     {
      "Ref": "AlarmTopicD01E77F9"
     }
    ],
    "Period": 300,
    "Statistic": "Average",
    "Tags": [
     {
      "Key": "Environment",
      "Value": "Production"
     },
     {
      "Key": "ManagedBy",
      "Value": "CDK"
     },
     {
      "Key": "Project",
      "Value": "Academia"
     }
    ],
    "Threshold": 5368709120,
    "TreatMissingData": "notBreaching"
   },
   "Metadata": {
    "aws:cdk:path": "AcademiaMonitoringStack/RdsStorageAlarm/Resource"
   }
  },
  "RdsConnectionsAlarm2CE1E130": {
   "Type": "AWS::CloudWatch::Alarm",
   "Properties": {
    "AlarmActions": [
     {
      "Ref": "AlarmTopicD01E77F9"
     }
    ],
    "AlarmDescription": "RDS database connections approaching limit",
    "AlarmName": "Academia-RDS-Connections",
    "ComparisonOperator": "GreaterThanOrEqualToThreshold",
    "Dimensions": [
     {
      "Name": "DBInstanceIdentifier",
      "Value": {
       "Fn::ImportValue": "AcademiaBackendStack:ExportsOutputRefAcademiaDatabase583B400399DBD937"
      }
     }
    ],
    "EvaluationPeriods": 2,
    "MetricName": "DatabaseConnections",
    "Namespace": "AWS/RDS",
    "Period": 300,
    "Statistic": "Average",
    "Tags": [
     {
      "Key": "Environment",
      "Value": "Production"
     },
     {
      "Key": "ManagedBy",
      "Value": "CDK"
     },
     {
      "Key": "Project",
      "Value": "Academia"
     }
    ],
    "Threshold": 80,
    "TreatMissingData": "notBreaching"
   },
   "Metadata": {
    "aws:cdk:path": "AcademiaMonitoringStack/RdsConnectionsAlarm/Resource"
   }
  },
  "RdsMemoryAlarm4CDBEDF1": {
   "Type": "AWS::CloudWatch::Alarm",
   "Properties": {
    "AlarmActions": [
     {
      "Ref": "AlarmTopicD01E77F9"
     }
    ],
    "AlarmDescription": "RDS freeable memory below 256MB",
    "AlarmName": "Academia-RDS-FreeableMemory",
    "ComparisonOperator": "LessThanThreshold",
    "Dimensions": [
     {
      "Name": "DBInstanceIdentifier",
      "Value": {
       "Fn::ImportValue": "AcademiaBackendStack:ExportsOutputRefAcademiaDatabase583B400399DBD937"
      }
     }
    ],
    "EvaluationPeriods": 3,
    "MetricName": "FreeableMemory",
    "Namespace": "AWS/RDS",
    "Period": 300,
    "Statistic": "Average",
    "Tags": [
     {
      "Key": "Environment",
      "Value": "Production"
     },
     {
      "Key": "ManagedBy",
      "Value": "CDK"
     },
     {
      "Key": "Project",
      "Value": "Academia"
     }
    ],
    "Threshold": 268435456,
    "TreatMissingData": "notBreaching"
   },
   "Metadata": {
    "aws:cdk:path": "AcademiaMonitoringStack/RdsMemoryAlarm/Resource"
   }
  },
  "RdsReadLatencyAlarm4C08B81C": {
   "Type": "AWS::CloudWatch::Alarm",
   "Properties": {
    "AlarmActions": [
     {
      "Ref": "AlarmTopicD01E77F9"
     }
    ],
    "AlarmDescription": "RDS read latency exceeded 100ms",
    "AlarmName": "Academia-RDS-ReadLatency",
    "ComparisonOperator": "GreaterThanOrEqualToThreshold",
    "Dimensions": [
     {
      "Name": "DBInstanceIdentifier",
      "Value": {
       "Fn::ImportValue": "AcademiaBackendStack:ExportsOutputRefAcademiaDatabase583B400399DBD937"
      }
     }
    ],
    "EvaluationPeriods": 3,
    "MetricName": "ReadLatency",
    "Namespace": "AWS/RDS",
    "Period": 300,
    "Statistic": "Average",
    "Tags": [
     {
      "Key": "Environment",
      "Value": "Production"
     },
     {
      "Key": "ManagedBy",
      "Value": "CDK"
     },
     {
      "Key": "Project",
      "Value": "Academia"
     }
    ],
    "Threshold": 0.1,
    "TreatMissingData": "notBreaching"
   },
   "Metadata": {
    "aws:cdk:path": "AcademiaMonitoringStack/RdsReadLatencyAlarm/Resource"
   }
  },
  "Api4xxAlarm2D137FC8": {
   "Type": "AWS::CloudWatch::Alarm",
   "Properties": {
    "AlarmActions": [
     {
      "Ref": "AlarmTopicD01E77F9"
     }
    ],
    "AlarmDescription": "API Gateway 4XX error rate exceeded 5%",
    "AlarmName": "Academia-API-4xxErrors",
    "ComparisonOperator": "GreaterThanOrEqualToThreshold",
    "Dimensions": [
     {
      "Name": "ApiName",
      "Value": "academia-api"
     }
    ],
    "EvaluationPeriods": 3,
    "MetricName": "4XXError",
    "Namespace": "AWS/ApiGateway",
    "Period": 300,
    "Statistic": "Average",
    "Tags": [
     {
      "Key": "Environment",
      "Value": "Production"
     },
     {
      "Key": "ManagedBy",
      "Value": "CDK"
     },
     {
      "Key": "Project",
      "Value": "Academia"
     }
    ],
    "Threshold": 0.05,
    "TreatMissingData": "notBreaching"
   },
   "Metadata": {
    "aws:cdk:path": "AcademiaMonitoringStack/Api4xxAlarm/Resource"
   }
  },
  "Api5xxAlarm31F257DC": {
   "Type": "AWS::CloudWatch::Alarm",
   "Properties": {
    "AlarmActions": [
     {
      "Ref": "AlarmTopicD01E77F9"
     }
    ],
    "AlarmDescription": "API Gateway 5XX errors detected",
    "AlarmName": "Academia-API-5xxErrors",
    "ComparisonOperator": "GreaterThanOrEqualToThreshold",
    "Dimensions": [
     {
      "Name": "ApiName",
      "Value": "academia-api"
     }
    ],
    "EvaluationPeriods": 2,
    "MetricName": "5XXError",
    "Namespace": "AWS/ApiGateway",
    "OKActions": [
     {
      "Ref": "AlarmTopicD01E77F9"
     }
    ],
    "Period": 300,
    "Statistic": "Sum",
    "Tags": [
     {
      "Key": "Environment",
      "Value": "Production"
     },
     {
      "Key": "ManagedBy",
      "Value": "CDK"
     },
     {
      "Key": "Project",
      "Value": "Academia"
     }
    ],
    "Threshold": 5,
    "TreatMissingData": "notBreaching"
   },
   "Metadata": {
    "aws:cdk:path": "AcademiaMonitoringStack/Api5xxAlarm/Resource"
   }
  },
  "ApiLatencyAlarm453002C0": {
   "Type": "AWS::CloudWatch::Alarm",
   "Properties": {
    "AlarmActions": [
     {
      "Ref": "AlarmTopicD01E77F9"
     }
    ],
    "AlarmDescription": "API Gateway latency exceeded 5 seconds (P95)",
    "AlarmName": "Academia-API-Latency",
    "ComparisonOperator": "GreaterThanOrEqualToThreshold",
    "Dimensions": [
     {
      "Name": "ApiName",
      "Value": "academia-api"
     }
    ],
    "EvaluationPeriods": 3,
    "ExtendedStatistic": "p95",
    "MetricName": "Latency",
    "Namespace": "AWS/ApiGateway",
    "Period": 300,
    "Tags": [
     {
      "Key": "Environment",
      "Value": "Production"
     },
     {
      "Key": "ManagedBy",
      "Value": "CDK"
     },
     {
      "Key": "Project",
      "Value": "Academia"
     }
    ],
    "Threshold": 5000,
    "TreatMissingData": "notBreaching"
   },
   "Metadata": {
    "aws:cdk:path": "AcademiaMonitoringStack/ApiLatencyAlarm/Resource"
   }
  },
  "CloudFrontErrorAlarmBA6786A9": {
   "Type": "AWS::CloudWatch::Alarm",
   "Properties": {
    "AlarmActions": [
     {
      "Ref": "AlarmTopicD01E77F9"
     }
    ],
    "AlarmDescription": "CloudFront error rate exceeded 5%",
    "AlarmName": "Academia-CloudFront-ErrorRate",
    "ComparisonOperator": "GreaterThanOrEqualToThreshold",
    "Dimensions": [
     {
      "Name": "DistributionId",
      "Value": {
       "Fn::ImportValue": "AcademiaFrontendStack:ExportsOutputRefDistribution830FAC524DF81588"
      }
     },
     {
      "Name": "Region",
      "Value": "Global"
     }
    ],
    "EvaluationPeriods": 3,
    "MetricName": "TotalErrorRate",
    "Namespace": "AWS/CloudFront",
    "Period": 300,
    "Statistic": "Average",
    "Tags": [
     {
      "Key": "Environment",
      "Value": "Production"
     },
     {
      "Key": "ManagedBy",
      "Value": "CDK"
     },
     {
      "Key": "Project",
      "Value": "Academia"
     }
    ],
    "Threshold": 5,
    "TreatMissingData": "notBreaching"
   },
   "Metadata": {
    "aws:cdk:path": "AcademiaMonitoringStack/CloudFrontErrorAlarm/Resource"
   }
  },
  "BackendLogGroupDA10F1B2": {
   "Type": "AWS::Logs::LogGroup",
   "Properties": {
    "LogGroupName": {
     "Fn::Join": [
      "",
      [
       "/aws/lambda/",
       {
        "Fn::ImportValue": "AcademiaBackendStack:ExportsOutputRefBackendFunction63314140F8746164"
       }
      ]
     ]
    },
    "RetentionInDays": 14,
    "Tags": [
     {
      "Key": "Environment",
      "Value": "Production"
     },
     {
      "Key": "ManagedBy",
      "Value": "CDK"
     },
     {
      "Key": "Project",
      "Value": "Academia"
     }
    ]
   },
   "UpdateReplacePolicy": "Delete",
   "DeletionPolicy": "Delete",
   "Metadata": {
    "aws:cdk:path": "AcademiaMonitoringStack/BackendLogGroup/Resource"
   }
  },
  "ErrorMetricFilter77F7AAD4": {
   "Type": "AWS::Logs::MetricFilter",
   "Properties": {
    "FilterPattern": "?\"ERROR\" ?\"Exception\" ?\"FATAL\"",
    "LogGroupName": {
     "Ref": "BackendLogGroupDA10F1B2"
    },
    "MetricTransformations": [
     {
      "MetricName": "ApplicationErrors",
      "MetricNamespace": "Academia/Application",
      "MetricValue": "1"
     }
    ]
   },
   "Metadata": {
    "aws:cdk:path": "AcademiaMonitoringStack/ErrorMetricFilter/Resource"
   }
  },
  "ApplicationErrorAlarm3C0D912E": {
   "Type": "AWS::CloudWatch::Alarm",
   "Properties": {
    "AlarmActions": [
     {
      "Ref": "AlarmTopicD01E77F9"
     }
    ],
    "AlarmDescription": "Application errors detected in logs",
    "AlarmName": "Academia-Application-Errors",
    "ComparisonOperator": "GreaterThanOrEqualToThreshold",
    "EvaluationPeriods": 2,
    "MetricName": "ApplicationErrors",
    "Namespace": "Academia/Application",
    "Period": 300,
    "Statistic": "Sum",
    "Tags": [
     {
      "Key": "Environment",
      "Value": "Production"
     },
     {
      "Key": "ManagedBy",
      "Value": "CDK"
     },
     {
      "Key": "Project",
      "Value": "Academia"
     }
    ],
    "Threshold": 20,
    "TreatMissingData": "notBreaching"
   },
   "Metadata": {
    "aws:cdk:path": "AcademiaMonitoringStack/ApplicationErrorAlarm/Resource"
   }
  },
  "AcademiaDashboardCAF52829": {
   "Type": "AWS::CloudWatch::Dashboard",
   "Properties": {
    "DashboardBody": {
     "Fn::Join": [
      "",
      [
       "{\"widgets\":[{\"type\":\"text\",\"width\":24,\"height\":1,\"x\":0,\"y\":0,\"properties\":{\"markdown\":\"# Academia Production Dashboard\\n## Lambda Backend Metrics\"}},{\"type\":\"metric\",\"width\":8,\"height\":6,\"x\":0,\"y\":1,\"properties\":{\"view\":\"timeSeries\",\"title\":\"Lambda Invocations\",\"region\":\"",
       {
        "Ref": "AWS::Region"
       },
       "\",\"metrics\":[[\"AWS/Lambda\",\"Invocations\",\"FunctionName\",\"",
       {
        "Fn::ImportValue": "AcademiaBackendStack:ExportsOutputRefBackendFunction63314140F8746164"
       },
       "\",{\"period\":60,\"stat\":\"Sum\"}]],\"yAxis\":{}}},{\"type\":\"metric\",\"width\":8,\"height\":6,\"x\":8,\"y\":1,\"properties\":{\"view\":\"timeSeries\",\"title\":\"Lambda Duration (ms)\",\"region\":\"",
       {
        "Ref": "AWS::Region"
       },
       "\",\"metrics\":[[\"AWS/Lambda\",\"Duration\",\"FunctionName\",\"",
       {
        "Fn::ImportValue": "AcademiaBackendStack:ExportsOutputRefBackendFunction63314140F8746164"
       },
       "\",{\"period\":60}],[\"AWS/Lambda\",\"Duration\",\"FunctionName\",\"",
       {
        "Fn::ImportValue": "AcademiaBackendStack:ExportsOutputRefBackendFunction63314140F8746164"
       },
       "\",{\"period\":60,\"stat\":\"p95\"}]],\"yAxis\":{}}},{\"type\":\"metric\",\"width\":8,\"height\":6,\"x\":16,\"y\":1,\"properties\":{\"view\":\"timeSeries\",\"title\":\"Lambda Errors & Throttles\",\"region\":\"",
       {
        "Ref": "AWS::Region"
       },
       "\",\"metrics\":[[\"AWS/Lambda\",\"Errors\",\"FunctionName\",\"",
       {
        "Fn::ImportValue": "AcademiaBackendStack:ExportsOutputRefBackendFunction63314140F8746164"
       },
       "\",{\"color\":\"#d62728\",\"period\":60,\"stat\":\"Sum\"}],[\"AWS/Lambda\",\"Throttles\",\"FunctionName\",\"",
       {
        "Fn::ImportValue": "AcademiaBackendStack:ExportsOutputRefBackendFunction63314140F8746164"
       },
       "\",{\"color\":\"#ff7f0e\",\"period\":60,\"stat\":\"Sum\"}]],\"yAxis\":{}}},{\"type\":\"text\",\"width\":24,\"height\":1,\"x\":0,\"y\":7,\"properties\":{\"markdown\":\"## RDS Database Metrics\"}},{\"type\":\"metric\",\"width\":6,\"height\":6,\"x\":0,\"y\":8,\"properties\":{\"view\":\"timeSeries\",\"title\":\"RDS CPU Utilization (%)\",\"region\":\"",
       {
        "Ref": "AWS::Region"
       },
       "\",\"metrics\":[[\"AWS/RDS\",\"CPUUtilization\",\"DBInstanceIdentifier\",\"",
       {
        "Fn::ImportValue": "AcademiaBackendStack:ExportsOutputRefAcademiaDatabase583B400399DBD937"
       },
       "\",{\"period\":60}]],\"yAxis\":{}}},{\"type\":\"metric\",\"width\":6,\"height\":6,\"x\":6,\"y\":8,\"properties\":{\"view\":\"timeSeries\",\"title\":\"RDS Database Connections\",\"region\":\"",
       {
        "Ref": "AWS::Region"
       },
       "\",\"metrics\":[[\"AWS/RDS\",\"DatabaseConnections\",\"DBInstanceIdentifier\",\"",
       {
        "Fn::ImportValue": "AcademiaBackendStack:ExportsOutputRefAcademiaDatabase583B400399DBD937"
       },
       "\",{\"period\":60}]],\"yAxis\":{}}},{\"type\":\"metric\",\"width\":6,\"height\":6,\"x\":12,\"y\":8,\"properties\":{\"view\":\"timeSeries\",\"title\":\"RDS Free Storage (GB)\",\"region\":\"",
       {
        "Ref": "AWS::Region"
       },
       "\",\"metrics\":[[\"AWS/RDS\",\"FreeStorageSpace\",\"DBInstanceIdentifier\",\"",
       {
        "Fn::ImportValue": "AcademiaBackendStack:ExportsOutputRefAcademiaDatabase583B400399DBD937"
       },
       "\"]],\"yAxis\":{}}},{\"type\":\"metric\",\"width\":6,\"height\":6,\"x\":18,\"y\":8,\"properties\":{\"view\":\"timeSeries\",\"title\":\"RDS Read/Write Latency (s)\",\"region\":\"",
       {
        "Ref": "AWS::Region"
       },
       "\",\"metrics\":[[\"AWS/RDS\",\"ReadLatency\",\"DBInstanceIdentifier\",\"",
       {
        "Fn::ImportValue": "AcademiaBackendStack:ExportsOutputRefAcademiaDatabase583B400399DBD937"
       },
       "\",{\"period\":60}],[\"AWS/RDS\",\"WriteLatency\",\"DBInstanceIdentifier\",\"",
       {
        "Fn::ImportValue": "AcademiaBackendStack:ExportsOutputRefAcademiaDatabase583B400399DBD937"
       },
       "\",{\"period\":60}]],\"yAxis\":{}}},{\"type\":\"text\",\"width\":24,\"height\":1,\"x\":0,\"y\":14,\"properties\":{\"markdown\":\"## API Gateway Metrics\"}},{\"type\":\"metric\",\"width\":8,\"height\":6,\"x\":0,\"y\":15,\"properties\":{\"view\":\"timeSeries\",\"title\":\"API Gateway Requests\",\"region\":\"",
       {
        "Ref": "AWS::Region"
       },
       "\",\"metrics\":[[\"AWS/ApiGateway\",\"Count\",\"ApiName\",\"academia-api\",{\"period\":60,\"stat\":\"Sum\"}]],\"yAxis\":{}}},{\"type\":\"metric\",\"width\":8,\"height\":6,\"x\":8,\"y\":15,\"properties\":{\"view\":\"timeSeries\",\"title\":\"API Gateway Latency (ms)\",\"region\":\"",
       {
        "Ref": "AWS::Region"
       },
       "\",\"metrics\":[[\"AWS/ApiGateway\",\"Latency\",\"ApiName\",\"academia-api\",{\"period\":60}],[\"AWS/ApiGateway\",\"Latency\",\"ApiName\",\"academia-api\",{\"period\":60,\"stat\":\"p95\"}]],\"yAxis\":{}}},{\"type\":\"metric\",\"width\":8,\"height\":6,\"x\":16,\"y\":15,\"properties\":{\"view\":\"timeSeries\",\"title\":\"API Gateway Errors\",\"region\":\"",
       {
        "Ref": "AWS::Region"
       },
       "\",\"metrics\":[[\"AWS/ApiGateway\",\"4XXError\",\"ApiName\",\"academia-api\",{\"color\":\"#ff7f0e\",\"period\":60,\"stat\":\"Sum\"}],[\"AWS/ApiGateway\",\"5XXError\",\"ApiName\",\"academia-api\",{\"color\":\"#d62728\",\"period\":60,\"stat\":\"Sum\"}]],\"yAxis\":{}}},{\"type\":\"text\",\"width\":24,\"height\":1,\"x\":0,\"y\":21,\"properties\":{\"markdown\":\"## CloudFront CDN Metrics\"}},{\"type\":\"metric\",\"width\":8,\"height\":6,\"x\":0,\"y\":22,\"properties\":{\"view\":\"timeSeries\",\"title\":\"CloudFront Requests\",\"region\":\"",
       {
        "Ref": "AWS::Region"
       },
       "\",\"metrics\":[[\"AWS/CloudFront\",\"Requests\",\"DistributionId\",\"",
       {
        "Fn::ImportValue": "AcademiaFrontendStack:ExportsOutputRefDistribution830FAC524DF81588"
       },
       "\",\"Region\",\"Global\",{\"period\":60,\"stat\":\"Sum\"}]],\"yAxis\":{}}},{\"type\":\"metric\",\"width\":8,\"height\":6,\"x\":8,\"y\":22,\"properties\":{\"view\":\"timeSeries\",\"title\":\"CloudFront Cache Hit Rate (%)\",\"region\":\"",
       {
        "Ref": "AWS::Region"
       },
       "\",\"metrics\":[[\"AWS/CloudFront\",\"CacheHitRate\",\"DistributionId\",\"",
       {
        "Fn::ImportValue": "AcademiaFrontendStack:ExportsOutputRefDistribution830FAC524DF81588"
       },
       "\",\"Region\",\"Global\"]],\"yAxis\":{}}},{\"type\":\"metric\",\"width\":8,\"height\":6,\"x\":16,\"y\":22,\"properties\":{\"view\":\"timeSeries\",\"title\":\"CloudFront Error Rate (%)\",\"region\":\"",
       {
        "Ref": "AWS::Region"
       },
       "\",\"metrics\":[[\"AWS/CloudFront\",\"TotalErrorRate\",\"DistributionId\",\"",
       {
        "Fn::ImportValue": "AcademiaFrontendStack:ExportsOutputRefDistribution830FAC524DF81588"
       },
       "\",\"Region\",\"Global\",{\"color\":\"#d62728\"}]],\"yAxis\":{}}},{\"type\":\"text\",\"width\":24,\"height\":1,\"x\":0,\"y\":28,\"properties\":{\"markdown\":\"## Alarm Status\"}},{\"type\":\"alarm\",\"width\":24,\"height\":4,\"x\":0,\"y\":29,\"properties\":{\"title\":\"All Alarms\",\"alarms\":[\"",
       {
        "Fn::GetAtt": [
         "LambdaErrorsAlarm8ED74A7D",
         "Arn"
        ]
       },
       "\",\"",
       {
        "Fn::GetAtt": [
         "LambdaDurationAlarmA8007F1F",
         "Arn"
        ]
       },
       "\",\"",
       {
        "Fn::GetAtt": [
         "LambdaThrottlesAlarm13DE03A1",
         "Arn"
        ]
       },
       "\",\"",
       {
        "Fn::GetAtt": [
         "LambdaConcurrencyAlarm801E48EA",
         "Arn"
        ]
       },
       "\",\"",
       {
        "Fn::GetAtt": [
         "RdsCpuAlarm29EF1690",
         "Arn"
        ]
       },
       "\",\"",
       {
        "Fn::GetAtt": [
         "RdsStorageAlarm879B47F1",
         "Arn"
        ]
       },
       "\",\"",
       {
        "Fn::GetAtt": [
         "RdsConnectionsAlarm2CE1E130",
         "Arn"
        ]
       },
       "\",\"",
       {
        "Fn::GetAtt": [
         "RdsMemoryAlarm4CDBEDF1",
         "Arn"
        ]
       },
       "\",\"",
       {
        "Fn::GetAtt": [
         "RdsReadLatencyAlarm4C08B81C",
         "Arn"
        ]
       },
       "\",\"",
       {
        "Fn::GetAtt": [
         "Api4xxAlarm2D137FC8",
         "Arn"
        ]
       },
       "\",\"",
       {
        "Fn::GetAtt": [
         "Api5xxAlarm31F257DC",
         "Arn"
        ]
       },
       "\",\"",
       {
        "Fn::GetAtt": [
         "ApiLatencyAlarm453002C0",
         "Arn"
        ]
       },
       "\",\"",
       {
        "Fn::GetAtt": [
         "CloudFrontErrorAlarmBA6786A9",
         "Arn"
        ]
       },
       "\",\"",
       {
        "Fn::GetAtt": [
         "ApplicationErrorAlarm3C0D912E",
         "Arn"
        ]
       },
       "\"]}}]}"
      ]
     ]
    },
    "DashboardName": "Academia-Production"
   },
   "Metadata": {
    "aws:cdk:path": "AcademiaMonitoringStack/AcademiaDashboard/Resource"
   }
  },
  "CDKMetadata": {
   "Type": "AWS::CDK::Metadata",
   "Properties": {
    "Analytics": "v2:deflate64:H4sIAAAAAAAA/02NwWrDMBBEvyV3eZMq0HtJSS8pLW7uRVkrziay1milmiD070E2hJ7mzbyF1aC3W9iszCQNdrfG0QnyTzR4U2aS3yxeIB95JFS7s5+hKMe9QD5w/xE4jVU8+dPGQLgnF22o4n8viswAuWVnq5rzmx3hvdaFirKoYXf2e8fTgXuFjlM3mYgXyG/OhKHeLvBu5HJiE7o6PUspqrXCKeD85SvFMcWiPHcWrrL+0xpeXmGzugpRE5KPNFhol3wA3D/0Xw4BAAA="
   },
   "Metadata": {
    "aws:cdk:path": "AcademiaMonitoringStack/CDKMetadata/Default"
   }
  }
 },
 "Outputs": {
  "AlarmTopicArn": {
   "Description": "SNS Topic ARN for alarms",
   "Value": {
    "Ref": "AlarmTopicD01E77F9"
   }
  },
  "DashboardUrl": {
   "Description": "CloudWatch Dashboard URL",
   "Value": "https://us-east-1.console.aws.amazon.com/cloudwatch/home?region=us-east-1#dashboards:name=Academia-Production"
  },
  "FlowLogsLogGroup": {
   "Description": "VPC Flow Logs CloudWatch Log Group",
   "Value": {
    "Ref": "VpcFlowLogsGroupC5F6A8C5"
   }
  }
 },
 "Parameters": {
  "BootstrapVersion": {
   "Type": "AWS::SSM::Parameter::Value<String>",
   "Default": "/cdk-bootstrap/hnb659fds/version",
   "Description": "Version of the CDK Bootstrap resources in this environment, automatically retrieved from SSM Parameter Store. [cdk:skip]"
  }
 },
 "Rules": {
  "CheckBootstrapVersion": {
   "Assertions": [
    {
     "Assert": {
      "Fn::Not": [
       {
        "Fn::Contains": [
         [
          "1",
          "2",
          "3",
          "4",
          "5"
         ],
         {
          "Ref": "BootstrapVersion"
         }
        ]
       }
      ]
     },
     "AssertDescription": "CDK bootstrap stack version 6 required. Please run 'cdk bootstrap' with a recent version of the CDK CLI."
    }
   ]
  }
 }
}